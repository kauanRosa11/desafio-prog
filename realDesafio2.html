<script>
    /*
## Problema 2: Gestor de Notas e Médias de Alunos

Contexto: Um professor precisa de um sistema para registrar as notas dos seus 5 alunos em 4 bimestres, calcular médias e identificar alunos com desempenho baixo.

### Requisitos:
1. Função para validar notas: Valide se a nota está entre 0 e 10 (use while).
2. Função para adicionar notas: Insira as 4 notas de cada aluno usando for.
3. Função para calcular média: Use for para somar as notas e calcular a média.
4. Função para classificar desempenho: Use if...else aninhado:
	 - Média >= 9: Excelente
	 - Média >= 7: Bom
	 - Média >= 5: Regular
	 - Média < 5: Insuficiente
5. Função para gerar relatório: Mostre o nome, notas, média e classificação de cada aluno.

Dados Iniciais:

```javascript
let alunos = ["João", "Maria", "Pedro", "Ana", "Carlos"];
let notas = [
	// cada elemento é um array com 4 notas, ex: [8, 7.5, 9, 10]
];
```

> **DESAFIO:** Implemente um sistema completo onde o professor possa cadastrar notas, remover um aluno se necessário, visualizar relatórios e tudo validado adequadamente.
    */

let alunos = ["João", "Maria", "Pedro", "Ana", "Carlos"];
let notas = [[], [], [], [], []];
let media = [[], [], [], [], []];
let desempenho = [[], [], [], [], []];
let bimestre = 0;
let soma = 0;
let alunosAdicionados = 0;

function gerarMenuAlunos() {
    let msg = `De qual aluno?\n\n`;
    for (let i = 0; i < alunos.length; i++) {
        msg += `${i + 1} - ${alunos[i]}\n`;
    }
    return msg;
}

function qualAlunoFunc () {
    let qualAluno = Number(prompt(gerarMenuAlunos())) - 1;
    while (qualAluno < 0 || qualAluno >= alunos.length || isNaN(qualAluno)) {
        alert(`Aluno inválido!`);
        return qualAlunoFunc();
    }
    return qualAluno;
}

function addAlunoFunc () {
     if (alunosAdicionados >= 3) {
        alert("Você só pode adicionar até 3 novos alunos!");
        return;
    }
    let nomeNovo = prompt("Digite o nome do novo aluno:");
    alunos.push(nomeNovo);
    notas.push([]);
    media.push([]);
    desempenho.push([]);
    alunosAdicionados++;
    alert(`Aluno "${nomeNovo}" adicionado com sucesso!`);
}

function adicionarNotaFunc () {
    let qualAluno = qualAlunoFunc();
    for (;notas[qualAluno].length < 4;) {
        bimestre++
        if (bimestre > 4) {
            bimestre = 1;
        }
        let nota = Number(prompt(`Adicione a nota do ${bimestre}º bimestre do aluno "${alunos[qualAluno]}":`));
        validarNotaFunc(nota, qualAluno);
    }
    mediaFunc(qualAluno);
    classAlunoFunc(qualAluno);
}

function validarNotaFunc (nota, aluno) {
    while (nota < 0 || nota > 10 || isNaN(nota)) {
        alert(`Erro! A nota deve ser um número entre 0 e 10!`);
        nota = Number(prompt(`Adicione a nota do ${bimestre}º bimestre do aluno "${alunos[aluno]}":`));
    }
    notas[aluno].push(nota);
}

function mediaFunc (aluno) {
    for (let item of notas[aluno]) {
        soma += item;
    }
    soma = soma / 4;
    media[aluno].push(soma.toFixed(1));
    soma = 0;
}
function classAlunoFunc (aluno) {
    let m = media[aluno];
    if (m >=9) {
        return `Excelente`;
    } else if (m >= 7) {
        return `Bom`;
    } else if (m >= 5) {
        return `Regular`;
    } else {
        return `Insuficiente`;
    }
}
function removerAluno  () {
    let qualAluno = qualAlunoFunc();
    let nome = alunos[qualAluno];
    alunos.splice(qualAluno, 1);
    notas.splice(qualAluno, 1);
    media.splice(qualAluno, 1);
    desempenho.splice(qualAluno, 1);
    alert(`Aluno ${nome} removido com sucesso!`);
}
function gerarRelatorioFunc () {
    let texto = "Relatório:\n\n";
    for (let i = 0; i < alunos.length; i++) {
        if (notas[i].length < 4) {
            texto += `Aluno: ${alunos[i]}\nNotas: INCOMPLETAS\n\n`;
            continue;
        }
        let classAluno = classAlunoFunc(i);
        texto += `Aluno: ${alunos[i]}\nNotas: ${notas[i].join(", ")}\nMédia: ${media[i]}\nDesempenho: ${classAluno}\n\n`;
    }
    alert(texto);
}

    // ENTRADA

    alert(`Bem vindo! Este programa foi feito para gerenciar notas e alunos.`);
    function menu () {
        while (true) {
        let opcoes = Number(prompt(`O que deseja fazer?\n\n1 - Adicionar notas\n2 - Adicionar aluno\n3 - Remover aluno\n4 - Ver relatório\n5 - Sair`));
        
        switch (opcoes) {
            case 1: adicionarNotaFunc(); break;
            case 2: addAlunoFunc(); break;
            case 3: removerAluno(); break;
            case 4: gerarRelatorioFunc(); break;
            case 5: alert("Encerrando..."); return;
            default: alert("Opção inválida!");
        }}}

        menu();

</script>